<!DOCTYPE html>
<html lang="en">
	<head>
		<title>Cydia Tweak</title>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<link rel="icon" href="../CydiaIcon.png">
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.5/css/bootstrap.min.css">
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
		<style>
			body {background-color: #efeff4;}
			a:link, a:visited, a:hover {text-decoration: none;}
			h1, h2, .package-desc {margin-left: 7px;}
			.badge-label {border-radius:1em;}
			.panel, .list-group-item, .alert {border-radius: 0 !important;}
			.list-group-item:last-child {margin-bottom: -1px;}
			.subshots {text-align: center;}
			.subshots:nth-child(1) {margin-bottom: 10px;}
			.screenshots img {border: thin solid #BEB6D8;}
			.package-buttons {margin-top: 10px;}
			.repo-buttons {margin-top: 20px;}
			.package-error {display: none;}
			.screenshots {display: none;}
			.fullchangelog {display: none;}
			.latest-version {vertical-align: right;}
			.panel-body.row.screenshots{width:100%;}
			#ad{padding-left:0px;}
		</style>
	</head>
	<body>
		<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-65039567-7', 'auto');
  ga('send', 'pageview');

</script>
<div id="ad">
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- freee -->
<ins class="adsbygoogle"
style="display:inline-block;width:100%;height:100%;"
data-ad-client="ca-pub-3896831196320932"
data-ad-slot="8200933409"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
    	<div class="container">

        	<div class="row alert alert-danger package-error"></div>

			<div class="panel row panel-default">
            	<div class="panel-heading">
                	<h1 class="package-name"></h1>
					<small class="package-author"></small>
            	</div>
        	</div>
					<div class="row panel panel-default">
						<div id="ioscheck"></div>
					</div>
        	<div class="package-info">

				<div class="row panel panel-default">
					<div class="panel-heading">
						<span class="glyphicon glyphicon-align-left"></span> Description
					</div>
					<p class="panel-body package-desc"></p>
				</div>



				<div class="row panel panel-default">
					<div class="panel-heading">
						<span class="glyphicon glyphicon-pencil"></span> Recent Changes
						<div class="label label-info badge-label latest-version"></div>
					</div>
					<div class="panel-body changelog-list"></div>
				</div>

				<div class="row panel panel-default">
					<div class="panel-heading screenshots-header">
						<span class="glyphicon glyphicon-picture"></span> Screenshots
						<small><span class="glyphicon glyphicon-triangle-bottom"></span></small>
					</div>
					<div class="panel-body row screenshots"></div>
				</div>

				<div class="row panel panel-default">
                	<div class="panel-heading fullchangelog-header">
						<span class="glyphicon glyphicon-tasks"></span> Full Changelog
						<small><span class="glyphicon glyphicon-triangle-bottom"></span></small>
					</div>
					<div class="package-info package-versions fullchangelog"></div>
            	</div>

			</div>

            <div class="row package-buttons">
            	<ul class="list-group"></ul>
            </div>

        	<div class="row repo-buttons">
            	<ul class="list-group">
                	<li class="list-group-item">
						<a href="https://github.com/ChikuwaJB/" target="_blank">
                    		<span class="glyphicon glyphicon-wrench"></span> View SourceCode
						</a>
                	</li>
									<li class="list-group-item">
<div id="iOSver"></div>
									</li>
            	</ul>
							<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- freee -->
<ins class="adsbygoogle"
     style="display:inline-block;width:336px;height:280px"
     data-ad-client="ca-pub-3896831196320932"
     data-ad-slot="8200933409"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
        	</div>

        </div>

  		<script>

			$(document).ready(function() {
				$(".screenshots").slideToggle(function() {});
				$(".fullchangelog").slideToggle(function() {});
				if ( /iP(hone|od|ad)/.test( navigator.platform ) ) {
				    　　var ua = navigator.userAgent;　　　　　　　　
				        var v = (navigator.appVersion).match(/OS (\d+)_(\d+)_?(\d+)?/);
				        var versions = [parseInt(v[1], 10), parseInt(v[2], 10), parseInt(v[3] || 0, 10)];
				        var iosv = versions[ 0 ] + "." + versions[1] + "." + versions[2];
								var iosvv=versions[ 0 ] + versions[1] + versions[2]
				        $("#iOSver").text("iOS Version:"+iosv);
				    }else{
				        $("#iOSver").text("iOS Version:Not iOS");
				    }

				var dPackage = getParameterByName("p");
				if (!dPackage) {
					$(".package-error").text("パッケージが見つかりません").css("display", "block");
					$(".package-info").css("display", "none");
					$(".package-name").text("Not Found");
					return;
				}
		  		$.getJSON("packages/" + dPackage + ".json", function(data) {
						if(data.iosver != null){
							if(iosvv>=data.iosver){
								$("#ioscheck").html("OK");
							}else{
								$("#ioscheck").html("BAD");
							}
						}
					document.title = data.name + " by " + data.author;
					$(".package-name").text(data.name);
					$(".package-desc").text(data.description);
					$(".latest-version").text(data.version);
					$(".package-author").text(" by " + data.author);
					var cList = $(".changelog-list");
					var changes = data.changelog[data.version];
					for (var c in changes) {
						var change = changes[c];
						cList.append("<li>" + change + "</li>")
					}
					$(".screenshots-header").click(function() {
						$(".screenshots").slideToggle(function() {
						});
					});
					var count = 0;
					var screenshots = data.screenshots;
					var sKeys = Object.keys(screenshots);
					for (var s in sKeys) {
						var screenshot = sKeys[s];
						if (count % 2 === 0) {
							$(".screenshots").append("<div class=\"subshots col-xs-12\"></div>");
						}
						$(".screenshots .subshots:last-child").append("<div class=\"col-xs-6\"><img class=\"img-responsive\" src=\"screenshots/" + dPackage + "/" + screenshot + "\" title=\"" + screenshots[screenshot] + "\"><p>" + screenshots[screenshot] + "</p><br></div>");
						count += 1;
					}
					$(".fullchangelog-header").click(function() {
						$(".fullchangelog").slideToggle(function() {
						});
					});
					var latest = data.version;
					var versions = Object.keys(data.changelog).reverse();
					for (var v in versions) {
						var version = versions[v];
						var panel = $("<div class=\"panel-default \"></div>");
						panel.append(" <div class=\"panel-heading\">" + version + "</div>");
						panel.append(" <div class=\"panel-body changelog-list\"></div>");
						if (version === latest) {
							panel.find(".panel-heading").append(" <div class=\"label label-info badge-label latest-version\">Current</div>");
						}
						var changes = data.changelog[version];
						for (var c in changes) {
							var change = changes[c];
							panel.find(".changelog-list").append("<li>" + change + "</li>");
						}
						$(".package-versions").append(panel);
					}
					var links = data.links;
					var lKeys = Object.keys(links);
					for (var l in lKeys) {
						var link = lKeys[l];
						var wrap = $("<a href=\"" + links[link] + "\" target=\"_blank\"><li class=\"list-group-item\"></li></a>");
						wrap.find(".list-group-item").append($.parseHTML(link));
						$(".package-buttons .list-group").append(wrap);
					}
					$(".screenshots").slideToggle(function() {
					});
				})
				.fail(function() {
					$(".package-error").text("Coming Soon!!").css("display", "block");
					$(".package-info").css("display", "none");
					$(".package-name").text("ちょっとまってね");
					return;
				});
				function getParameterByName(name) {
					name = name.replace(/[\[]/, "\\[").replace(/[\]]/, "\\]");
					var regex = new RegExp("[\\?&]" + name + "=([^&#]*)"),
					results = regex.exec(location.search);
					return results === null ? null : decodeURIComponent(results[1].replace(/\+/g, " "));
				}
			});
		</script>
	</body>
</html>
